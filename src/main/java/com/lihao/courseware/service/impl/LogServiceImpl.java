package com.lihao.courseware.service.impl;

import com.lihao.courseware.constants.ExceptionConstants;
import com.lihao.courseware.constants.StringConstants;
import com.lihao.courseware.entity.po.Knowledge;
import com.lihao.courseware.entity.po.KnowledgePoint;
import com.lihao.courseware.entity.po.Log;
import com.lihao.courseware.entity.po.UserInfo;
import com.lihao.courseware.entity.query.UserInfoQuery;
import com.lihao.courseware.enums.IdentityEnum;
import com.lihao.courseware.exception.GlobalException;
import com.lihao.courseware.mapper.KnowledgeMapper;
import com.lihao.courseware.mapper.KnowledgePointMapper;
import com.lihao.courseware.mapper.UserInfoMapper;
import com.lihao.courseware.service.LogService;
import com.lihao.courseware.util.CommonTools;
import jakarta.annotation.Resource;
import org.springframework.stereotype.Service;
import org.apache.commons.codec.digest.DigestUtils;
import org.springframework.transaction.annotation.Transactional;
@Service
public class LogServiceImpl implements LogService {
    private static String content1 =" <div>             <h4>&emsp;&emsp;定义：</h4>             <p>               &emsp;&emsp;立体几何是研究三维空间中物体的形状、大小、位置关系的数学分支。立体几何体，简称几何体，是由平面图形围绕某一直线或平面旋转，或平移而得到的具有一定体积和形状的物体。             </p>             <br />             <h4>&emsp;&emsp;分类：</h4>             <p>&emsp;&emsp;根据几何体的形态特点，我们可以将其分为以下几类：</p>             <br />             <p>               &emsp;&emsp;1.               &emsp;<strong>柱体</strong>：有两个平行且大小相同的多边形底面，侧面为平行四边形的几何体。特殊柱体包括：             </p>             <p>               &emsp;&emsp;&emsp;（1）&emsp;<strong                 ><span data-id=\"0\" style=\"color: #63b0ff; cursor: pointer\">正方体</span></strong               >：六个面都是正方形的特殊长方体，所有棱长相等。             </p>             <p style=\"display: flex;justify-content: center\">               <img src=\"/content/course1/1.png\" alt=\"\" style=\"width: 180px\">             </p>             <p>               &emsp;&emsp;&emsp;（2）&emsp;<strong                 ><span data-id=\"1\" style=\"color: #63b0ff; cursor: pointer\">长方体</span></strong               >：六个面都是矩形的平行六面体，且相对的两个面完全相同。             </p>             <p style=\"display: flex;justify-content: center\">               <img src=\"/content/course1/2.png\" alt=\"\" style=\"width: 200px\">             </p>             <p>               &emsp;&emsp;&emsp;（3）&emsp;<strong                 ><span data-id=\"2\" style=\"color: #63b0ff; cursor: pointer\">圆柱</span></strong               >：底面为圆，侧面为曲面的几何体，母线与底面垂直。             </p>             <p style=\"display: flex;justify-content: center\">               <img src=\"/content/course1/3.png\" alt=\"\" style=\"width: 100px\">             </p>             <br />             <p>               &emsp;&emsp;2. &emsp;               <strong>锥体</strong               >：有一个顶点，其余各点都在一个平面上（底面），且侧面都是三角形的几何体。特殊锥体包括：             </p>             <p>               &emsp;&emsp;&emsp;（1）&emsp;               <strong><span data-id=\"3\" style=\"color: #63b0ff; cursor: pointer\">圆锥</span></strong               >：底面为圆，顶点在底面圆心上方的几何体，侧面为曲面，母线与底面圆相交于一点。             </p>             <p style=\"display: flex;justify-content: center\">               <img src=\"/content/course1/4.png\" alt=\"\" style=\"width: 160px\">             </p>             <p>               &emsp;&emsp;&emsp;（2）&emsp;<strong                 ><span data-id=\"4\" style=\"color: #63b0ff; cursor: pointer\">棱锥</span></strong               >：底面为多边形，顶点不在底面上的几何体，侧面为三角形。             </p>             <p style=\"display: flex;justify-content: center\">               <img src=\"/content/course1/5.png\" alt=\"\" style=\"width: 160px\">             </p>             <br />             &emsp;&emsp;3. &emsp;             <strong><span data-id=\"5\" style=\"color: #63b0ff; cursor: pointer\">球体</span></strong             >：所有点都与球心等距的点的集合，表面为曲面，无棱无顶点。             <p style=\"display: flex;justify-content: center\">               <img src=\"/content/course1/6.png\" alt=\"\" style=\"width: 150px\">             </p>             <br /><br />             <h4>&emsp;&emsp;几何体的基本性质与特征</h4>             <p>               &emsp;&emsp;1.&emsp;<strong>面</strong>：几何体由若干个面组成，面可以是平面也可以是曲面。             </p>             <p>&emsp;&emsp;2.&emsp;<strong>棱</strong>：两个相邻面的交线称为棱，棱是直线段。</p>             <p>&emsp;&emsp;3.&emsp;<strong>顶点</strong>：三条或三条以上棱的交点称为顶点。</p>             <p>               &emsp;&emsp;4.&emsp;<strong>底面</strong>：在几何体中，处于最下方的平面部分称为底面（对于锥体而言）。             </p>             <p>&emsp;&emsp;5.&emsp;<strong>侧面</strong>：除底面外的其他面称为侧面。</p>             <p>               &emsp;&emsp;6.&emsp;<strong>高</strong>：从底面某一点垂直到底面另一侧（或顶点）的最短距离称为高。             </p>             <p>               &emsp;&emsp;7.&emsp;<strong                 ><span data-id=\"6\" style=\"color: #63b0ff; cursor: pointer\">母线</span                 >（仅适用于圆锥、圆柱等）</strong               >：连接顶点与底面圆周上任意一点的线段。             </p>             <p style=\"display: flex;justify-content: center\">               <img src=\"/content/course1/7.png\" alt=\"\" style=\"width: 400px\">             </p>             <br />             <h4>&emsp;&emsp; 特征总结：</h4>             <p>&emsp;&emsp;1.&emsp; 正方体和长方体具有规则的棱长和面形，易于计算和描述。</p>             <p>               &emsp;&emsp;2.&emsp;               圆柱和圆锥的底面为圆，侧面为曲面，其表面积和体积计算涉及圆周率和积分概念。             </p>             <p>               &emsp;&emsp;3.&emsp;               棱柱和棱锥的底面为多边形，侧面为三角形或矩形，其性质与底面形状密切相关。             </p>             <p>               &emsp;&emsp;4.&emsp; 球体作为唯一没有棱和顶点的几何体，其所有点都等距于<strong                 ><span data-id=\"7\" style=\"color: #63b0ff; cursor: pointer\">球心</span></strong               >，具有完美的对称性。             </p>             <p style=\"display: flex;justify-content: center;margin: 20px 0\">               <img src=\"/content/course1/8.png\" alt=\"\" style=\"width: 240px\">               <img src=\"/content/course1/9.png\" alt=\"\" style=\"width: 220px\">             </p>           </div>";
    private static String content2="<div>             <h3>&emsp;&emsp;一、表面积的计算</h3>             <p>               &emsp;&emsp;&emsp;1.&emsp;<strong>定义：</strong>表面积（S）是立体图形外部所有面的面积之和。             </p>             <br />             <p>&emsp;&emsp;&emsp;2.&emsp;<strong>基本形状的表面积</strong></p>             <p>               &emsp;&emsp;&emsp;&emsp;&emsp;（1）               <strong><span data-id=\"7\" style=\"color: #63b0ff;cursor: pointer;\">长方体：</span></strong>设长、宽、高分别为 l,w,h，则表面积               <span> \\[ S_{\\text{长方体}} = 2(lw + lh + wh) \\]</span>             </p>             <p>               &emsp;&emsp;&emsp;&emsp;&emsp;（2）               <strong><span data-id=\"8\" style=\"color: #63b0ff;cursor: pointer;\">正方体：</span></strong>（特殊长方体）：设边长为 a，则表面积               <span> \\[ S_{\\text{正方体}} = 6a^2 \\]</span>             </p>             <p>               &emsp;&emsp;&emsp;&emsp;&emsp;（3）               <strong><span  data-id=\"9\" style=\"color: #63b0ff;cursor: pointer;\">圆柱体：</span></strong>设底面半径为 r，高为 h，则表面积               <span> \\[ S_{\\text{圆柱体}} = 2\\pi r^2 + 2\\pi rh \\] </span>             </p>             <p>               &emsp;&emsp;&emsp;&emsp;&emsp;（4）               <strong><span data-id=\"10\" style=\"color: #63b0ff;cursor: pointer;\">圆锥体：</span></strong>设底面半径为 r，斜边（母线）长为 l，则表面积               <span> \\[ S_{\\text{圆锥体}} = \\pi r^2 + \\pi rl \\] </span               >&emsp;&emsp;&emsp;&emsp;&emsp;（注意：这里假设圆锥侧面展开后为<span data-id=\"11\" style=\"color: #63b0ff;cursor: pointer;\">扇形</span>，且其弧长等于底面圆的周长）             </p>             <br />             <p>               &emsp;&emsp;&emsp;&emsp;&emsp;（5）               <strong><span data-id=\"12\" style=\"color: #63b0ff;cursor: pointer;\">圆台：</span></strong>设圆台的上底面半径为 r，下底面半径为 R（R>r），高为               h，斜边（母线）长为 l。则表面积               <span> \\[ S = \\pi r^2 + \\pi R^2 + \\pi (r + R) l \\] </span>             </p>             <p>               &emsp;&emsp;&emsp;&emsp;&emsp;（6）               <strong><span data-id=\"13\" style=\"color: #63b0ff;cursor: pointer;\">球体：</span></strong>设半径为 r，则表面积               <span> \\[ S_{\\text{球体}} = 4\\pi r^2 \\] </span>             </p>             <br />             <p>               &emsp;&emsp;3.&emsp;               <strong>组合体表面积计算：</strong               >对于由多个基本形状组合而成的立体，需分别计算各部分的表面积，并根据组合方式（如拼接、挖空等）进行加减调整，注意共享面在计算时只计算一次。             </p>             <br />              <h3>&emsp;&emsp;二、体积的计算</h3>              <br />             <p>               &emsp;&emsp;&emsp;1.&emsp; <strong>定义：</strong>体积（V）是立体图形所占空间的大小。             </p>             <br />             <p>&emsp;&emsp;&emsp;2.&emsp; <strong>基本形状体积公式：</strong></p>             <p>               &emsp;&emsp;&emsp;&emsp;&emsp;（1）               <strong>长方体：</strong>设长、宽、高分别为 l,w,h，则体积               <span> \\[ V_{\\text{长方体}} = lwh \\] </span>             </p>             <p>               &emsp;&emsp;&emsp;&emsp;&emsp;（2）               <strong>正方体：</strong>设底面半径为 r，高为 h，则体积               <span> \\[ V_{\\text{正方体}} = a^3 \\] </span>             </p>             <p>               &emsp;&emsp;&emsp;&emsp;&emsp;（3）               <strong>圆柱体：</strong>（特殊长方体）：设边长为 a，则体积               <span> \\[ V_{\\text{圆柱体}} = \\pi r^2 h \\] </span>             </p>             <p>               &emsp;&emsp;&emsp;&emsp;&emsp;（4）               <strong>圆锥体：</strong>设底面半径为 r，高为 h，则体积               <span> \\[ V_{\\text{圆锥体}} = \\frac{1}{3}\\pi r^2 h \\] </span>             </p>             <p>               &emsp;&emsp;&emsp;&emsp;&emsp;（5）               <strong>圆台体：</strong>设圆台的上底面半径为 r，下底面半径为 R（R>r），高为 h，则体积               <span> \\[ V = \\frac{1}{3} \\pi h (R^2 + r^2 + Rr) \\] </span>             </p>             <p>               &emsp;&emsp;&emsp;&emsp;&emsp;（6）               <strong>球体：</strong>设半径为 r，则体积               <span> \\[ V_{\\text{球体}} = \\frac{4}{3}\\pi r^3 \\] </span>             </p>             <br />             <p>               &emsp;&emsp;3.&emsp;               <strong>组合体体积计算：</strong               >组合体的体积计算通常更为直接，只需将各部分的体积相加即可。若存在挖空部分，则需从总体积中减去相应体积。             </p>           </div>";
    private static String content3 = " <div>           <h3>&emsp;&emsp;一、性质定理</h3>           <p>&emsp;&emsp;&emsp;1.&emsp;<strong>直线与平面平行的性质定理</strong></p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（1）             <strong>文字语言：</strong             >一条直线与一个平面平行，则过这条直线的任一平面与此平面的交线与该直线平行。           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（2） <strong>符号语言：</strong>             <span               >\\[ a \\parallel \\alpha, \\quad a \\subset \\beta, \\quad \\alpha \\cap \\beta = b \\quad               \\Rightarrow \\quad a \\parallel b \\]</span             >           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（3） <strong>图形语言：</strong>             <img src=\"/content/course3/1.png\" alt=\"\" />           </p>           <br />           <br />           <p>&emsp;&emsp;&emsp;2.&emsp; <strong>平面与平面平行的性质定理</strong></p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（1）             <strong>文字语言：</strong>如果两个平行平面同时和第三个平面相交，那么它们的交线平行。           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（2） <strong>符号语言：</strong>             <span               >\\[ \\alpha \\parallel \\beta, \\quad \\alpha \\cap \\gamma = a, \\quad \\beta \\cap \\gamma = b               \\quad \\Rightarrow \\quad a \\parallel b \\]</span             >           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（3） <strong>图形语言：</strong>             <img src=\"/content/course3/2.png\" alt=\"\" />           </p>           <br />           <p>&emsp;&emsp;&emsp;3.&emsp; <strong>直线与平面垂直的性质定理</strong></p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（1）             <strong>文字语言：</strong>垂直于同一平面的两条直线平行。           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（2） <strong>符号语言：</strong>             <span>               \\( a \\perp \\alpha, \\quad b \\perp \\alpha \\quad \\Rightarrow \\quad a \\parallel b \\)</span             >           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（3） <strong>图形语言：</strong>             <img src=\"/content/course3/3.png\" alt=\"\" />           </p>           <br />           <p>&emsp;&emsp;&emsp;4.&emsp; <strong>平面与平面垂直的性质定理</strong></p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（1）             <strong>文字语言：</strong             >对于两个相互乘直的平面，在一个平面内垂直交线的直线垂直另一平面。           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（2） <strong>符号语言：</strong>             <span               >\\( \\alpha \\perp \\beta, \\quad \\alpha \\cap \\beta = m, \\quad a \\subset \\beta, \\quad a               \\perp m \\quad \\Rightarrow \\quad a \\perp \\alpha \\)</span             >           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（3） <strong>图形语言：</strong>             <img src=\"/content/course3/4.png\" alt=\"\" />           </p>           <br />           <h3>&emsp;&emsp;二、判定定理</h3>           <p>&emsp;&emsp;&emsp;1.&emsp;<strong>直线与平面平行的判定定理</strong></p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（1）             <strong>文字语言：</strong             >平面外一条直线与此平面内的一条直线平行，则该直线与此平面平行。           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（2） <strong>符号语言：</strong>             <span               >\\( a \\not\\subset \\alpha, \\quad b \\subset \\alpha, \\quad a \\parallel b \\quad               \\Rightarrow \\quad a \\parallel \\alpha \\)</span             >           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（3） <strong>图形语言：</strong>             <img src=\"/content/course3/5.png\" alt=\"\" />           </p>           <br />           <br />           <p>&emsp;&emsp;&emsp;2.&emsp; <strong>平面与平面平行的判定定理</strong></p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（1）             <strong>文字语言：</strong>一个平面内的两条相交直线与另一个平面平行，则这两个平面平行。           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（2） <strong>符号语言：</strong>             <span               >\\( a \\subset \\beta, \\quad b \\subset \\beta, \\quad a \\cap b = P, \\quad a \\parallel               \\alpha, \\quad b \\parallel \\alpha \\quad \\Rightarrow \\quad \\beta \\parallel \\alpha               \\)</span             >           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（3） <strong>图形语言：</strong>             <img src=\"/content/course3/6.png\" alt=\"\" />           </p>           <br />           <p>&emsp;&emsp;&emsp;3.&emsp; <strong>直线与平面垂直的判定定理</strong></p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（1）             <strong>文字语言：</strong             >一条直线与一个平面内的两条相交直线都垂直，则该直线与此平面垂直。           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（2） <strong>符号语言：</strong>             <span>               \\( c \\perp a, \\quad c \\perp b, \\quad a \\cap b = P, \\quad a \\subset \\alpha, \\quad b               \\subset \\alpha \\quad \\Rightarrow \\quad c \\perp \\alpha \\)</span             >           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（3） <strong>图形语言：</strong>             <img src=\"/content/course3/7.png\" alt=\"\" />           </p>           <br />           <p>&emsp;&emsp;&emsp;4.&emsp; <strong>平面与平面垂直的判定定理</strong></p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（1）             <strong>文字语言：</strong>一个平面过另一个平面的垂线，则这两个平面垂直。           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（2） <strong>符号语言：</strong>             <span               >\\( a \\perp \\alpha, \\quad a \\subset \\beta \\quad \\Rightarrow \\quad \\beta \\perp \\alpha               \\)</span             >           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（3） <strong>图形语言：</strong>             <img src=\"/content/course3/8.png\" alt=\"\" />           </p>           <br />           <h3>             &emsp;&emsp;三、<span data-id=\"14\" style=\"color: #63b0ff; cursor: pointer\">总结</span>           </h3>         </div>";
    private static String content4 ="   <div>           <h3>&emsp;&emsp;一、平面角</h3>           <p>             &emsp;&emsp;&emsp;1.&emsp;<strong>定义：</strong>平面角是平面内两条射线与其公共端点组成的图形。这两条射线称为角的边，公共端点称为角的顶点。平面角的大小通常用“度”或“弧度”来衡量。           </p>           <p             style=\"                 display: flex;                 flex-direction: column;                 justify-content: center;                 align-items: center;               \"           >             <img src=\"/content/course4/1.png\" alt=\"\" style=\"width: 300px\" />             ∠AOB即为平面角           </p>           <br />           <p>&emsp;&emsp;&emsp;2.&emsp;<strong>表示方法：</strong></p>           <p>             &emsp;&emsp;&emsp;&emsp;&emsp;（1）可以用三个大写字母表示，如角∠ABC，其中A是顶点，BC是角的两边。           </p>           <p>             &emsp;&emsp;&emsp;&emsp;&emsp;（2）也可以用一个小写希腊字母（如α, β, γ等）来表示。           </p>           <br />           <p>&emsp;&emsp;&emsp;3.&emsp; <strong>度量单位：</strong></p>           <p>&emsp;&emsp;&emsp;&emsp;&emsp;（1）<strong>度：</strong>一个完整的圆周角是360°。</p>           <p>             &emsp;&emsp;&emsp;&emsp;&emsp;（2）<strong>弧度：</strong>一个完整的圆周角是2π弧度。           </p>           <br />           <p>&emsp;&emsp;&emsp;4.&emsp;<strong>转换公式：</strong></p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（1）1° ＝ <span>\\[ \\frac{180}{\\pi} \\]</span>弧度           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（1）1弧度 ＝ <span>\\[ \\frac{180^\\circ}{\\pi} \\]</span>           </p>           <br />           <p>&emsp;&emsp;&emsp;5.&emsp;<strong>性质：</strong></p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（1）平面角具有可加性，即若两个角相邻，则它们之和等于这两个角合并后的大角。           </p>           <p style=\"display: flex; align-items: center\">             &emsp;&emsp;&emsp;&emsp;&emsp;（2）平面角的大小与边的长短无关，只与边之间的夹角有关。           </p>           <br />           <h3>&emsp;&emsp;二、二面角</h3>           <br />           <p>             &emsp;&emsp;&emsp;1.&emsp;             <strong>定义：</strong             >二面角是从一条直线出发的两个半平面所组成的图形，这条直线称为二面角的棱，这两个半平面称为二面角的面。二面角的大小用它的平面角来度量，平面角是棱上任意一点在两个半平面内的射影所夹的角。           </p>           <p             style=\"                 display: flex;                 flex-direction: column;                 justify-content: center;                 align-items: center;               \"           >             <img src=\"/content/course4/2.png\" alt=\"\" style=\"width: 300px\" />             ∠AOB即为二面角           </p>           <br />           <p>&emsp;&emsp;&emsp;2.&emsp; <strong>表示方法：</strong></p>           <p>             &emsp;&emsp;&emsp;&emsp;&emsp;（1）通常用两个半平面和棱来表示，如二面角α - l −             β，其中l是棱，α和β是两个半平面。           </p>           <br />           <p>&emsp;&emsp;&emsp;3.&emsp; <strong>度量：</strong></p>           <p>             &emsp;&emsp;&emsp;&emsp;&emsp;（1）二面角的大小通过其平面角来度量，平面角的大小可以是锐角、直角、钝角或平角。           </p>           <p>&emsp;&emsp;&emsp;&emsp;&emsp;（2）也可以用角度或弧度来表示。</p>           <br />           <p>&emsp;&emsp;&emsp;4.&emsp; <strong>性质：</strong></p>           <p>             &emsp;&emsp;&emsp;&emsp;&emsp;（1）二面角的平面角是唯一的，与棱上取哪一点作为射影的顶点无关。           </p>           <p>&emsp;&emsp;&emsp;&emsp;&emsp;（2）两个二面角相等当且仅当它们的平面角相等。</p>           <br />           <p>&emsp;&emsp;&emsp;5.&emsp; <strong>计算二面角的平面角：</strong></p>           <p>             &emsp;&emsp;&emsp;&emsp;&emsp;（1）常用的方法有定义法、<span             data-id=\"15\"             style=\"color: #63b0ff; cursor: pointer\"           >三垂线定理法</span           >、向量法等。           </p>           <p>             &emsp;&emsp;&emsp;&emsp;&emsp;（2）在立体几何中，经常通过构造直角三角形，利用三角函数来计算二面角的平面角。           </p>           <br />           <p>&emsp;&emsp;&emsp;6.&emsp; <strong>性质</strong> <span>（向量法）：</span></p>           <p>             &emsp;&emsp;&emsp;&emsp;&emsp;（1）设两个半平面的法向量分别为<span           >\\( n_1 \\) 和 \\( n_2 \\)</span           >，则二面角的平面角θ（或其补角）的余弦值为             <span>\\[ \\cos \\theta = \\frac{n_1 \\cdot n_2}{||n_1|| \\cdot ||n_2||} \\]</span>           </p>           <p>             &emsp;&emsp;&emsp;&emsp;&emsp;（注意：这里得到的θ可能是二面角的平面角，也可能是其补角，具体取决于法向量的方向。）           </p>           <br />         </div>";
    private static String point1 = "  <div>             <h4>&emsp;&emsp;1.&emsp;定义：</h4>             <p>               &emsp;&emsp;正方体（或称为立方体）是一个六个面都是正方形的特殊长方体，其中所有棱的长度都相等。             </p>             <br />             <h4>&emsp;&emsp;2.&emsp; 面与棱：</h4>             <p>               &emsp;&emsp;&emsp;（1）               <strong>面：</strong>正方体有6个面，每个面都是一个正方形。             </p>             <p>               &emsp;&emsp;&emsp;（2）               <strong>棱：</strong               >正方体有12条棱，每条棱连接两个面。由于所有棱的长度都相等，因此正方体具有高度的对称性。             </p>             <p>               &emsp;&emsp;&emsp;（3）               <strong>顶点：</strong>正方体有8个顶点，每个顶点由三条棱相交而成。             </p>             <p>               &emsp;&emsp;&emsp;（4）               <strong>底面：</strong>正方体的底面是6个面中的4个面，每个底面都是正方形。             </p>             <br />             <h4>&emsp;&emsp;3.&emsp; 对角线：</h4>             <p>               &emsp;&emsp;&emsp;（1）               <strong> 面对角线：</strong               >连接正方体同一面上的两个不相邻顶点的线段称为面对角线，每条面对角线都是正方形的对角线。             </p>             <p>               &emsp;&emsp;&emsp;（2）               <strong> 体对角线：</strong               >连接正方体两个不相邻顶点的线段称为体对角线。正方体有4条体对角线，每条体对角线都连接了正方体的相对顶点。体对角线的长度可以通过三维空间中的距离公式计算，对于边长为a的正方体，体对角线的长度为<span                 >\\sqrt{a^{2} + a^{2} + a^{2}} = \\sqrt{3}a</span               >             </p>             <br />             <h4>&emsp;&emsp;4.&emsp; 表面积与体积：</h4>             <p>               &emsp;&emsp;&emsp;（1）               <strong> 表面积：</strong               >连正方体的表面积是其所有面的面积之和。由于正方体有6个面，每个面的面积为a²（其中a为边长），所以正方体的表面积为6a²             </p>             <p>               &emsp;&emsp;&emsp;（2）               <strong> 体积：</strong               >正方体的体积是其底面积乘以高。由于正方体的底面和高都是边长a，所以其体积为<span                 >a^{3} = a \\times a \\times a</span               >               3             </p>             <br />             <h4>&emsp;&emsp;5.&emsp; 对称性：</h4>             <p>               &emsp;&emsp;正方体具有高度的对称性，包括中心对称、轴对称和面对称。具体来说，正方体关于其中心点、任何一条棱的中点所在的直线、以及任何一条面对角线所在的平面都是对称的。             </p>             <br />             <h4>&emsp;&emsp;6.&emsp; 截面：</h4>             <p>               &emsp;&emsp;&emsp;（1）               <strong> 截面：</strong               >正方体可以被不同的平面切割，形成不同的截面形状。常见的截面形状包括正方形、长方形、三角形、梯形、六边形等。特别地，当截面与正方体的三组相对棱分别平行时，截面为正方形；当截面与正方体的某一组相对棱平行但不与另外两组相对棱平行时，截面为长方形；当截面过正方体的三个顶点但不包括正方体的任何一条棱时，截面为等边三角形。             </p>             <br />             <h4>&emsp;&emsp;7.&emsp; 空间位置关系：</h4>             <p>               &emsp;&emsp;在三维空间中，正方体可以与其他几何体（如球体、圆柱体、圆锥体等）发生各种位置关系，如相离、相切、相交等。这些位置关系的研究有助于我们更深入地理解空间几何的复杂性。             </p>             <br />           </div>";
    private static String point2="<div>             <h4>&emsp;&emsp;1.&emsp;定义与性质：</h4>             <p>               &emsp;&emsp;&emsp;（1）               <strong> 定义：</strong               >长方体是一个有六个矩形面的多面体，其中每个面都是矩形，并且相对的面完全相同。             </p>             <p>               &emsp;&emsp;&emsp;（2）               <strong> 顶点：</strong>长方体有8个顶点，每个顶点由三条棱相交而成。             </p>             <p>               &emsp;&emsp;&emsp;（3）               <strong> 棱：</strong               >长方体有12条棱，每条棱都是直线段，并且与四个面相交。其中，有4条棱的长度相等且平行于长方体的长度方向，另外4条棱长度相等且平行于宽度方向，最后4条棱长度相等且平行于高度方向。             </p>             <p>               &emsp;&emsp;&emsp;（4）               <strong> 面：</strong>长方体有6个面，每个面都是矩形。相对的两个面面积相等且平行。             </p>              <br />             <h4>&emsp;&emsp;2.&emsp; 体积与表面积：</h4>             <p>               &emsp;&emsp;&emsp;（1）               <strong>体积：</strong               >长方体的体积V可以通过其三个维度（长度l、宽度w、高度h）的乘积来计算，即V = l × w × h。             </p>             <p>               &emsp;&emsp;&emsp;（2）               <strong>表面积：</strong               >长方体的表面积A是其所有外表面面积的总和。每个面的面积是lw、lw或wh（取决于面是如何由长方体的维度定义的）。因此，总表面积A               = 2lw + 2lh + 2wh。             </p>              <br />             <h4>&emsp;&emsp;3.&emsp; 对角线</h4>             <p>               &emsp;&emsp;&emsp;（1）               <strong> 空间对角线：</strong               >连接长方体任意两个不相邻顶点的线段称为长方体的空间对角线。其长度d可以通过三维空间中的距离公式计算，即d               = √(l^2 + w^2 + h^2)。             </p>             <p>               &emsp;&emsp;&emsp;（2）               <strong> 面对角线：</strong               >在长方体的每个面上，连接非相邻两个顶点的线段称为面对角线。每个面的面对角线长度可以通过二维空间中的勾股定理计算。             </p>             <br />             <h4>&emsp;&emsp;4.&emsp; 性质与定理</h4>             <p>               &emsp;&emsp;&emsp;（1）               <strong> 平行性质：</strong>长方体的对棱平行且等长。             </p>             <p>               &emsp;&emsp;&emsp;（2）               <strong> 垂直性质：</strong>长方体的相邻面互相垂直。             </p>             <p>               &emsp;&emsp;&emsp;（3）               <strong> 截面性质：</strong>长方体的任何非平行于面的截面都是矩形。             </p>             <p>               &emsp;&emsp;&emsp;（4）               <strong> 三视图：</strong               >从长方体的正面、上面和侧面看到的图形分别是矩形，这些图形称为长方体的三视图。             </p>           </div>";
    private static String point3="1. 定义与性质 定义：圆柱是一个由两个平行、等大且不相交的圆面以及连接这两个圆面的侧面围成的几何体。 底面：圆柱有两个底面，它们是两个平行的圆。 侧面：圆柱的侧面是一个曲面，可以展开成一个矩形（当底面垂直于侧面时）或平行四边形（当底面不垂直于侧面时，但通常我们考虑的是垂直于侧面的情况）。 高：圆柱的高是从一个底面圆心到另一个底面圆心的垂直距离。 母线：圆柱的母线是连接底面圆上任意一点与顶面圆上（不通过圆心）一点的线段，且这些线段都平行于底面圆的直径。 2. 体积与表面积 体积：圆柱的体积V可以通过底面积乘以高来计算，即V = πr²h，其中r是底面圆的半径，h是圆柱的高。 表面积：圆柱的表面积A包括两个底面的面积和侧面的面积。侧面的面积可以通过底面圆的周长乘以高来计算，即侧面积 = 2πrh。因此，总表面积A = 2πr² + 2πrh。 3. 性质与定理 平行性质：圆柱的底面圆是平行的，且母线与底面圆平行（或说母线垂直于底面圆的平面）。 垂直性质：圆柱的高垂直于底面圆。 截面性质：当用一个平面去截圆柱时，截面可能是圆（当平面与底面平行时）、椭圆（当平面与底面不平行也不与母线平行时）或矩形（当平面与底面垂直时，此时截面为圆柱的轴截面，且矩形的长是圆柱的母线长，宽是底面圆的直径）。 4. 展开图 圆柱的侧面展开图是一个矩形，其长等于底面圆的周长（2πr），宽等于圆柱的高（h）。 两个底面展开后是两个等大的圆。";
    private static String point4="1. 定义与性质 定义：圆锥是由一个圆面和一个顶点不在该圆面上的点，以及连接这个顶点和圆面上任意一点的线段（母线）所围成的几何体。 底面：圆锥的底面是一个圆。 顶点：圆锥有一个顶点，它不在底面上。 母线：圆锥的母线是连接顶点和底面圆上任意一点的线段。所有母线都相等且相交于顶点。 高：圆锥的高是从顶点到底面圆心的垂直距离。 轴：圆锥的轴是通过顶点和底面圆心的直线。 2. 体积与表面积 体积：圆锥的体积V可以通过底面积乘以高再除以3来计算，即V = (1/3)πr²h，其中r是底面圆的半径，h是圆锥的高。 表面积：圆锥的表面积A包括底面的面积和侧面的面积。底面的面积是πr²，侧面的面积可以通过底面圆的周长乘以母线长再除以2来计算（因为侧面展开后是一个扇形，其弧长等于底面圆的周长，半径等于圆锥的母线长），即侧面积 = πrl，其中l是圆锥的母线长。因此，总表面积A = πr² + πrl。 3. 性质与定理 平行性质：圆锥的母线都与底面圆相交于一点（即底面圆心），但母线之间并不平行。 垂直性质：圆锥的高垂直于底面圆。 截面性质：当用一个平面去截圆锥时，截面可能是圆（当平面与底面平行时）、椭圆（当平面与底面不平行也不与所有母线平行时）或三角形（当平面与所有母线都相交时，此时截面为圆锥的轴截面，且为等腰三角形）。 4. 展开图 圆锥的侧面展开图是一个扇形，其弧长等于底面圆的周长（2πr），半径等于圆锥的母线长（l）。 底面展开后是一个圆。";
    private static String point5="1. 定义与性质 定义：棱锥是由一个多边形底面、一个顶点以及连接这个顶点和底面各顶点的侧棱所围成的多面体。 底面：棱锥的底面是一个多边形。 顶点：棱锥有一个顶点，它不在底面上。 侧棱：棱锥的侧棱是连接顶点和底面各顶点的线段。所有侧棱的长度可以相等（等边棱锥），也可以不相等。 侧面：棱锥的侧面是由侧棱和底面各边（或其延长线）围成的三角形。 高：棱锥的高是从顶点到底面所在平面的垂线段。特别地，当底面是三角形时，棱锥的高也称为斜高，它是从顶点到底面三角形一边的垂线段的长度。 2. 体积与表面积 体积：棱锥的体积V可以通过底面积乘以高再除以3来计算，即V = (1/3)Bh，其中B是底面的面积，h是棱锥的高。 表面积：棱锥的表面积A包括底面的面积和所有侧面的面积之和。具体计算时，需要分别求出每个侧面的面积（三角形面积），然后相加，再加上底面的面积。 3. 性质与定理 平行性质：棱锥的侧棱所在的直线都相交于一点（即顶点），但它们之间并不平行。 垂直性质：棱锥的高垂直于底面。 截面性质：当用一个平面去截棱锥时，截面可能是多边形（如三角形、四边形等），具体形状取决于平面与棱锥的交线。特别地，当截面平行于底面时，截面是一个与底面相似的多边形。 4. 特殊棱锥 正棱锥：底面是正多边形，且顶点在底面的射影是底面正多边形的中心的棱锥。正棱锥的侧棱长度相等，侧面是全等的等腰三角形。 斜棱锥：侧棱不垂直于底面的棱锥。 直棱锥：侧棱垂直于底面的棱锥。特别地，当底面是三角形时，直棱锥也称为四面体。";
    private static String point6="1. 定义与性质 定义：球体是一个连续曲面的立体图形，由空间中所有与球心距离等于半径的点组成。 球心：球体的中心点，称为球心。 半径：从球心到球体表面任意一点的距离称为半径，记作r。 直径：经过球心且两端都在球体表面上的线段称为直径，其长度是半径的两倍，即2r。 球面：球体的表面是一个连续曲面，称为球面。 2. 体积与表面积 体积：球体的体积V可以通过公式V=  3 4 \u200B  πr  3  计算，其中r是球体的半径。 表面积：球体的表面积A可以通过公式A=4πr  2  计算，其中r是球体的半径。 3. 性质与定理 对称性：球体是高度对称的几何体，任何经过球心的直线都可以将球体分为两个完全相等的部分。 截面性质：用一个平面去截球体，截面可能是一个圆（当平面与球心不重合时）或一个点（当平面经过球心时）。特别地，当截面是圆时，该圆的半径小于或等于球体的半径，且截面圆的圆心到球心的距离与截面圆的半径和球体的半径之间满足勾股定理。 外接与内切：球体可以与多面体（如正方体、正四面体等）有外接或内切的关系。外接球体是指多面体的所有顶点都在球体表面上的球体；内切球体是指多面体的所有面都与球体相切的球体。";
    private static String point7="1. 定义 圆锥的母线：在圆锥中，母线是连接圆锥的顶点和底面圆上任意一点的线段。所有母线都相等且相交于顶点。 圆台的母线：类似地，在圆台中，母线是连接圆台的上底面和下底面圆上对应点（即延长后相交的点）的线段。所有母线都相等，但不相交。 旋转体的母线：更一般地，在由平面图形绕其一边旋转形成的旋转体中，那条旋转的边所对应的曲面上的任意一条线段都可以视为母线（但通常我们关注的是连接旋转体顶点和底面边缘的线段）。 多面体的母线（较少见）：在某些特殊的多面体中，如棱柱的侧面展开后形成的矩形中，连接矩形两短边的线段有时也被称为母线（但这并不是多面体母线的普遍定义）。 2. 性质 长度相等：在圆锥和圆台中，所有母线长度都相等。 相交或平行：在圆锥中，所有母线相交于顶点；在圆台中，所有母线平行（但延长后会相交于一点，即虚拟的顶点）。 决定形状：母线的长度和倾斜角度（对于圆锥和圆台）决定了旋转体的形状和大小。 3. 应用 计算表面积：在圆锥和圆台中，母线的长度是计算侧面积的关键参数。例如，圆锥的侧面积 = πrl，其中r是底面半径，l是母线长。 建模与设计：在工程设计、建筑设计和艺术设计中，母线常被用来描述和构建具有特定形状和比例的三维物体。 4. 注意事项 母线并不是所有立体图形都具有的特征。它主要出现在旋转体（如圆锥、圆台）和一些特殊的多面体中。 在不同的立体图形中，母线的定义和性质可能有所不同。因此，在讨论母线时，需要明确所指的立体图形。 5. 拓展概念 斜高：在圆锥中，有时也将从顶点到底面三角形一边的垂线段称为斜高。虽然斜高与母线在概念上有所不同（斜高是垂线段，而母线是连接顶点和底面圆上任意一点的线段），但在某些情况下（如计算侧面积时），它们可能具有相同的长度。然而，在严格意义上，斜高并不是母线的一种。";
    private static String point8=" <div>           <img src=\"/tipsContent/course2/1.png\" alt=\"\" style=\"width: 500px\">         </div>";
    private static String point9=" <div>           <img src=\"/tipsContent/course2/1.png\" alt=\"\" style=\"width: 500px\">         </div>";
    private static String point10="  <div>           <img src=\"/tipsContent/course2/2.png\" alt=\"\" style=\"width: 300px\">         </div>";
    private static String point11="  <div>           <img src=\"/tipsContent/course2/3.png\" alt=\"\" style=\"width: 200px\">         </div>";
    private static String point12="<p>            1. 扇形的定义            圆心角：顶点在圆心的角称为圆心角。扇形的圆心角通常表示为θ（单位为弧度或度）。            半径：连接圆心和圆上任意一点的线段称为半径，记作r。            2. 弧长公式            弧长l与圆心角θ（以弧度为单位）和半径r的关系为：            l=rθ            如果圆心角θ以度为单位，则弧长公式为：            l=            180            πrθ            \u200B             3. 扇形面积公式            扇形面积S与圆心角θ（以弧度为单位）和半径r的关系为：            S=            2            1            \u200B            r            2            θ            如果圆心角θ以度为单位，则扇形面积公式为：            S=            360            πr            2            θ            \u200B             4. 扇形与整个圆的关系            一个完整的圆（圆心角为2π或360            ∘            ）的面积为πr            2            。            因此，扇形面积占整个圆面积的比例为            2π            θ            \u200B            （当θ以弧度为单位）或            360            θ            \u200B            （当θ以度为单位）。            5. 扇形的周长            扇形的周长C由两条半径和弧长组成，即：            C=2r+l=2r+rθ=r(2+θ)(当θ以弧度为单位)            或            C=2r+            180            πrθ            \u200B            (当θ以度为单位)            这些公式和定义是理解和解决扇形相关问题的基础。          </p>";
    private static String point13="<div>           <img src=\"/tipsContent/course2/4.png\" alt=\"\" style=\"width: 200px\">         </div>";
    private static String point14="   <div>           <img src=\"/tipsContent/course2/5.png\" alt=\"\" style=\"width: 200px\">         </div>";
    private static String point15="<img src=\"/tipsContent/course3/1.jpg\" alt=\"\" />";
    private static String point16="  <div >           <p>             三垂线定理是立体几何的重要定理之一，平面内的一条直线，如果和这个平面的一条斜线的射影垂直，那么它也就和这条斜线垂直，三垂线定理通过平面斜线的射影与平面内一直线的垂直关系来判定斜线与平面内一条直线垂直，由于定理中涉及三条与平面内已知直线有垂直关系的直线（如图1，PA⊥平面α，PB⊥a，AB⊥a），故称为三垂线定理。           </p>           <img src=\"http://121.40.154.188:8080/courseware/img/955b6e5c-7c6b-482a-aeeb-d10a85b0c229.png\" alt=\"\" style=\"width: 200px;\">         </div>";
    private static String title1="正方体知识点";
    private static String title2="长方体知识点";
    private static String title3="圆柱知识点内容";
    private static String title4="圆锥知识点";
    private static String title5="棱锥知识点";
    private static String title6="球体知识点";
    private static String title7="母线知识点";
    private static String title8="长方体展开图解";
    private static String title9="正方体展开图解";
    private static String title10="圆柱体展开图解";
    private static String title11="圆锥体展开图解";
    private static String title12="扇形知识点";
    private static String title13="圆台体展开图解";
    private static String title14="球体表面积图解";
    private static String title15="性质与判定定理总结";
    private static String title16="三垂线定理";
    private final static String[] contents = new String[]{content1,content2,content3,content4};
    private final static String[] points = new String[]{point1,point2,point3,point4,point5,point6,point7,point8, point9,point10,point11,point12,point13,point14,point15,point16};
    private final static String[] titles = new String[]{title1,title2,title3,title4,title5,title6,title7,title8,title9,title10,title11,title12,title13,title14,title15,title16};
    @Resource
    private UserInfoMapper<UserInfo, UserInfoQuery> userInfoMapper;
    @Resource
    private KnowledgeMapper knowledgeMapper;
    @Resource
    private KnowledgePointMapper knowledgePointMapper;
    @Override
    public Long login(Log log) throws GlobalException {
        UserInfoQuery userInfoQuery = new UserInfoQuery();
        userInfoQuery.setName(log.getName());
        UserInfo userInfo = userInfoMapper.selectById(userInfoQuery);
        if(!DigestUtils.md5Hex(log.getPassword()).equals(userInfo.getPassword())
                ||!userInfo.getClassname().equals(log.getClassname())
                ||!userInfo.getIdentity().equals(log.getIdentity())){
            throw new GlobalException(ExceptionConstants.EMAIL_NO_MATCH);
        }
        /*return UUID.randomUUID() + String.valueOf(userInfo.getUserId());*/
        return userInfo.getUserId();
    }

    @Override
    @Transactional
    public Long register(Log log) throws GlobalException {
        //TODO 学生和教师不能重名尚未解决，暂做考虑
        UserInfoQuery userInfoQuery = new UserInfoQuery();
        userInfoQuery.setName(log.getName());
        UserInfo userInfo = userInfoMapper.selectById(userInfoQuery);
        if(log.getIdentity() == null || IdentityEnum.getIdentityEnumByStatus(log.getIdentity()) == null){
            throw new GlobalException(ExceptionConstants.INVALID_PARAM);
        }
        if(userInfo !=null){
            throw new GlobalException(ExceptionConstants.EMAIL_EXIST);
        }
        userInfo = new UserInfo();
        userInfo.setName(log.getName());
        userInfo.setClassname(log.getClassname());
        userInfo.setPassword(DigestUtils.md5Hex(log.getPassword()));
        userInfo.setUserId(CommonTools.getId());
        userInfo.setIdentity(log.getIdentity());
        userInfo.setAvatar(StringConstants.DEFAULT_USER_AVATAR);
        userInfoMapper.insert(userInfo);
        if(log.getIdentity().equals(IdentityEnum.STUDENT.getStatus())){
            //插入章节内容
            Knowledge knowledge = new Knowledge();
            for(int i = 0;i< contents.length;i++){
                knowledge.setId(i);
                knowledge.setContent(contents[i]);
                knowledge.setUserId(userInfo.getUserId());
                knowledge.setInit(contents[i]);
                knowledgeMapper.insert(knowledge);
            }
            //插入知识点
            for(int i = 0;i< points.length;i++){
                KnowledgePoint knowledgePoint = new KnowledgePoint();
                knowledgePoint.setId(i);
                knowledgePoint.setContent(points[i]);
                knowledgePoint.setTitle(titles[i]);
                knowledgePoint.setUserId(userInfo.getUserId());
                knowledgePoint.setJudge(false);
                knowledgePointMapper.insert(knowledgePoint);
            }
        }
        return userInfo.getUserId();
    }
}
